const PLAYER = OBJ_EVENT_ID_PLAYER
const ARCHER = 1
const DRASNA = 2
const MALVA = 3
const GARBODOR = 4

const FLAG_HIDE_ARCHER = FLAG_TEMP_1
const FLAG_HIDE_ELITES_1 = FLAG_TEMP_2
const FLAG_HIDE_GARBODOR = FLAG_TEMP_4
const FLAG_HIDE_SIEBOLD = FLAG_TEMP_5
const FLAG_HIDE_GIOVANNI = FLAG_TEMP_6
const FLAG_HIDE_GRUNTS = FLAG_TEMP_7
const FLAG_HIDE_WIKSTROM = FLAG_TEMP_8
const FLAG_HIDE_ARIANNA = FLAG_TEMP_9

script YouRealizeTheyreEvilRight_HideObject_Script {
    if (var(VAR_ALCATRAZ_STATE) != ARCHER_SUMMONED_ALCATRAZ && var(VAR_ALCATRAZ_STATE) != POST_ARRIVE_ALCATRAZ){
        setflag(FLAG_HIDE_ARCHER)
    }
    return
}

script YouRealizeTheyreEvilRight_HideGarbodor_Script {
    setflag(FLAG_HIDE_GARBODOR)
    return
}

script YouRealizeTheyreEvilRight_HideBasement_Script {
    setflag(FLAG_HIDE_ARCHER)
    setflag(FLAG_HIDE_ELITES_1)
    setflag(FLAG_HIDE_GARBODOR)
    setflag(FLAG_HIDE_SIEBOLD)
    setflag(FLAG_HIDE_GIOVANNI)
    setflag(FLAG_HIDE_GRUNTS)
    setflag(FLAG_HIDE_WIKSTROM)
    setflag(FLAG_HIDE_ARIANNA)
    return
}

script YouRealizeTheyreEvilRight_Basement_SetUpObjects_Script {
    setflag(FLAG_HIDE_GARBODOR)
    setflag(FLAG_HIDE_SIEBOLD)
    setflag(FLAG_HIDE_GIOVANNI)
    setflag(FLAG_HIDE_GRUNTS)
    setflag(FLAG_HIDE_WIKSTROM)
    setflag(FLAG_HIDE_ARIANNA)
    return
}

script YouRealizeTheyreEvilRight_CallPlayer_Dialogue {
    lock
        setvar(VAR_ALCATRAZ_STATE,ARCHER_SUMMONED_ALCATRAZ)
        clearflag(FLAG_ARCHER_CALL_ALCATRAZ)
        setvar(VAR_MUGSHOT, MUGSHOT_HILDA)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_HolyShit)
        callnative(ClearMugshot)

        playse(SE_POKENAV_CALL)
        waitse
        playse(SE_POKENAV_CALL)
        waitse
        pokenavcall("This phone is ringing.") //PSF TODO write new version of pokenavcall or msgbox_pokenav to allow for back and forth dialogue without the text box sliding down and without the pokenav intro
        waitmessage

        bufferpartymonnick(0,1)

        setvar(VAR_MUGSHOT, MUGSHOT_HUGH)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_AwesomeJobIn)

        setvar(VAR_MUGSHOT, MUGSHOT_HILDA)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_TheyDontLove)
        callnative(ClearMugshot)
        closemessage

        fadescreen(FADE_TO_BLACK)
        delay(30)
        fadescreen(FADE_FROM_BLACK)

        setvar(VAR_MUGSHOT, MUGSHOT_HUGH)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_YouSeemSurprised)

        setvar(VAR_MUGSHOT, MUGSHOT_HILDA)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_YoureNot)

        setvar(VAR_MUGSHOT, MUGSHOT_HUGH)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_IveBeenTrying)

        setvar(VAR_MUGSHOT, MUGSHOT_HILDA)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_WhatDoYouMean)

        checkitem(ITEM_HM03)
        setvar(VAR_MUGSHOT, MUGSHOT_HUGH)
        callnative(DrawMugshot)

        if (var(VAR_RESULT)){
            msgbox(gText_YouRealizeTheyreEvilRight_IWannaShowYou)
        } else {
            msgbox(gText_YouRealizeTheyreEvilRight_YoullNeedToCross)
        }
    playse(SE_POKENAV_HANG_UP)
        waitse

        setvar(VAR_MUGSHOT, MUGSHOT_HILDA)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_IDontKnowIf)
        callnative(ClearMugshot)
        closemessage
        release
        end
}

script YouRealizeTheyreEvilRight_PlayerLandedDialogue {
    lock
        setvar(VAR_ALCATRAZ_STATE,POST_ARRIVE_ALCATRAZ)
        playse(SE_POKENAV_CALL)
        waitse
        playse(SE_POKENAV_CALL)
        waitse

        setvar(VAR_MUGSHOT, MUGSHOT_HILDA)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_ImHereWhere)

        setvar(VAR_MUGSHOT, MUGSHOT_HUGH)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_SwimAroundThe)
        callnative(ClearMugshot)
        closemessage

        playse(SE_POKENAV_HANG_UP)
        waitse
        release
        end
}

script YouRealizeTheyreEvilRight_InteractArcher {
    lock
        setvar(VAR_ALCATRAZ_STATE,PRE_YOU_REALIZE_THEYRE_EVIL_RIGHT)
        setvar(VAR_MUGSHOT, MUGSHOT_HUGH)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_WelcomeToTheReal,MSGBOX_NPC)
        callnative(ClearMugshot)
        closemessage

        applymovement(11,Common_Movement_WalkUp)
        waitmovement(0)
        playse(SE_EXIT)
        waitse
        removeobject(11)
        release
        end
}

script YouRealizeTheyreEvil_Ghost1_Battle_Script{
    trainerbattle_single(TRAINER_VALERIE_1, gText_YouRealizeTheyreEvilRight_DotDotDot, gText_YouRealizeTheyreEvilRight_DotDotDot, YouRealizeTheyreEvil_Ghost1_Battle_Script)
        msgbox(gText_YouRealizeTheyreEvilRight_WhileAlcatraz,MSGBOX_AUTOCLOSE)
        goto(YouRealizeTheyreEvilRight_RemoveGhost)
        end
}

script YouRealizeTheyreEvil_Ghost2_Battle_Script{
    trainerbattle_single(TRAINER_ATSUSHI, gText_YouRealizeTheyreEvilRight_DotDotDot, gText_YouRealizeTheyreEvilRight_DotDotDot, YouRealizeTheyreEvil_Ghost2_Battle_Script)
        msgbox(gText_YouRealizeTheyreEvilRight_AsThePrisonPopulation,MSGBOX_AUTOCLOSE)
        goto(YouRealizeTheyreEvilRight_RemoveGhost)
        end
}

script YouRealizeTheyreEvil_Ghost3_Battle_Script{
    trainerbattle_single(TRAINER_TASHA, gText_YouRealizeTheyreEvilRight_DotDotDot, gText_YouRealizeTheyreEvilRight_DotDotDot, YouRealizeTheyreEvil_Ghost3_Battle_Script)
        msgbox(gText_YouRealizeTheyreEvilRight_TheInmateWasAlso,MSGBOX_AUTOCLOSE)
        goto(YouRealizeTheyreEvilRight_RemoveGhost)
        end
}

script YouRealizeTheyreEvil_Ghost4_Battle_Script{
    trainerbattle_single(TRAINER_CEDRIC, gText_YouRealizeTheyreEvilRight_DotDotDot, gText_YouRealizeTheyreEvilRight_DotDotDot, YouRealizeTheyreEvil_Ghost4_Battle_Script)
        msgbox(gText_YouRealizeTheyreEvilRight_TheProtests,MSGBOX_AUTOCLOSE)
        goto(YouRealizeTheyreEvilRight_RemoveGhost)
        end
}

script YouRealizeTheyreEvilRight_RemoveGhost {
    lock
        closemessage
        fadescreenswapbuffers(FADE_TO_BLACK)
        removeobject(VAR_LAST_TALKED)
        fadescreenswapbuffers(FADE_FROM_BLACK)
        release
        end
}

script YouRealizeTheyreEvil_ReleaseGarbodor_Script {
    applymovement(ARCHER,YouRealizeTheyreEvilRight_StepBackward)
        waitmovement(0)

        playse(SE_BALL_OPEN)
        waitse
        clearflag(FLAG_HIDE_GARBODOR)
        addobject(GARBODOR)
        playmoncry(SPECIES_GARBODOR, CRY_MODE_ENCOUNTER)
        waitmoncry
        playse(SE_SHINY)
        waitse
}

script YouRealizeTheyreEvilRight_PlayerArrived2F_Dialogue {
    lock
        applymovement(PLAYER,YouRealizeTheyreEvilRight_WalkToGroup)
        waitmovement(0)

        setvar(VAR_MUGSHOT, MUGSHOT_GRIMSLEY)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_TheChampionHasArrived)

        setvar(VAR_MUGSHOT, MUGSHOT_HILDA)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_NiceToMeetYou)

        setvar(VAR_MUGSHOT, MUGSHOT_HUGH)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_HasBeenUsing)
        callnative(ClearMugshot)
        closemessage

        playse(SE_PIN)
        applymovement(MALVA,Common_Movement_ExclamationMark)
        applymovement(DRASNA,Common_Movement_ExclamationMark)

        setvar(VAR_MUGSHOT, MUGSHOT_GRIMSLEY)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_WowSuperResourceful)

        setvar(VAR_MUGSHOT, MUGSHOT_SHAUNTAL)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_WhyAreWeHere)

        setvar(VAR_MUGSHOT, MUGSHOT_HUGH)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_ICanFinallyProve)

        setvar(VAR_MUGSHOT, MUGSHOT_HILDA)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_DidYouDragMe)

        setvar(VAR_MUGSHOT, MUGSHOT_HUGH)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_YesWaitNo)

        setvar(VAR_MUGSHOT, MUGSHOT_HILDA)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_DoesntDoAnythingForThis)

        setvar(VAR_MUGSHOT, MUGSHOT_HUGH)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_ICanProve)

        setvar(VAR_MUGSHOT, MUGSHOT_HILDA)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_How)

        setvar(VAR_MUGSHOT, MUGSHOT_HUGH)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_Look)
        callnative(ClearMugshot)
        closemessage

        call(YouRealizeTheyreEvil_ReleaseGarbodor_Script)
        applymovement(DRASNA,Common_Movement_FaceLeft)
        applymovement(MALVA,Common_Movement_FaceUp)

        setvar(VAR_MUGSHOT, MUGSHOT_HUGH)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_ThisIsOne)

        setvar(VAR_MUGSHOT, MUGSHOT_HILDA)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_IHadToGo)

        setvar(VAR_MUGSHOT, MUGSHOT_HUGH)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_ThisOneIsLevel)

        setvar(VAR_MUGSHOT, MUGSHOT_HILDA)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_ButTheyDefinitelyCan)

        setvar(VAR_MUGSHOT, MUGSHOT_HUGH)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_DoesntLearnThatNaturally)

        setvar(VAR_MUGSHOT, MUGSHOT_HILDA)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_SoUsedATM)

        fadescreen(FADE_TO_BLACK)

        //The screen fades to black. As it fades back in, it plays the memory of the police chief explaining that Self-Destruct TMs were taken out of circulation. The screen fades back in. //PSF TODO
        msgbox(format("This will show a flashback to the police chief explaining that TMs were taken out of circulation"))

        fadescreen(FADE_FROM_BLACK)

        setvar(VAR_MUGSHOT, MUGSHOT_HILDA)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_NoItMustHaveBeenBred)

        setvar(VAR_MUGSHOT, MUGSHOT_GRIMSLEY)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_TakeACloserLook)

        //PSF TODO Use CallBattleFactoryFunction to generate a Garbodor. Call the Summary screen from factory_rentmons directly to view said Garbodor.
        goto(YouRealizeTheyreEvilRight_StartQuestions_Script)
}

script YouRealizeTheyreEvilRight_StartQuestions_Script {
    setvar(VAR_MUGSHOT, MUGSHOT_GRIMSLEY)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_DoYouSeeNow,MSGBOX_YESNO)

        if (var(VAR_RESULT) == YES){
            call(YouRealizeTheyreEvilRight_AskProperties_Script)
        }else {
            call(YouRealizeTheyreEvilRight_EndQuestions_Script)
        }
    goto(YouRealizeTheyreEvilRight_Framing_Dialogue)
}

script YouRealizeTheyreEvilRight_AskProperties_Script {
    msgbox(gText_YouRealizeTheyreEvilRight_AhVeryAstute)
        multichoicedefault(18,6,MULTI_GARBADOR_PROPERTIES,1,FALSE)

        switch(var(VAR_RESULT)){
            case 0: goto(YouRealizeTheyreEvilRight_AskMoves_Script)
            default: goto(YouRealizeTheyreEvilRight_EndQuestions_Script)
        }
}

script YouRealizeTheyreEvilRight_AskMoves_Script {

    setvar(VAR_MUGSHOT, MUGSHOT_SHAUNTAL)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_WaitWhichMove)

        multichoicedefault(18,6,MULTI_GARBADOR_MOVES,0,TRUE)

        switch (var(VAR_RESULT)){
            case 2: goto(YouRealizeTheyreEvilRight_CorrectAnswer_Script)
            default: goto(YouRealizeTheyreEvilRight_EndQuestions_Script)
        }
}

script YouRealizeTheyreEvilRight_CorrectAnswer_Script {

    setvar(VAR_MUGSHOT, MUGSHOT_GRIMSLEY)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_VeryClever)
        setflag(FLAG_TEMP_1F)
        goto(YouRealizeTheyreEvilRight_Framing_Dialogue)
}

script YouRealizeTheyreEvilRight_EndQuestions_Script {

    setvar(VAR_MUGSHOT, MUGSHOT_GRIMSLEY)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_TheTipOff)

        setvar(VAR_MUGSHOT, MUGSHOT_HILDA)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_So)

        setvar(VAR_MUGSHOT, MUGSHOT_GRIMSLEY)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_HazeCanOnly)
}

script YouRealizeTheyreEvilRight_Framing_Dialogue {
    setvar(VAR_MUGSHOT, MUGSHOT_HILDA)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_IDontGetIt)

        setvar(VAR_MUGSHOT, MUGSHOT_SHAUNTAL)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_HasBeenFramingYou)

        setvar(VAR_MUGSHOT, MUGSHOT_HUGH)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_YouAlsoMetUp)

        setvar(VAR_MUGSHOT, MUGSHOT_HILDA)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_ButArianaSaid)

        setvar(VAR_MUGSHOT, MUGSHOT_HUGH)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_YeahNobodyKnows)

        setvar(VAR_MUGSHOT, MUGSHOT_HILDA)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_WhyWhyDoAll)

        setvar(VAR_MUGSHOT, MUGSHOT_HUGH)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_ExistsToMakeMoney)

        setvar(VAR_MUGSHOT, MUGSHOT_SHAUNTAL)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_CantArgueWithThat)

        setvar(VAR_MUGSHOT, MUGSHOT_HUGH)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_IJoinedThe)

        setvar(VAR_MUGSHOT, MUGSHOT_SHAUNTAL)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_AndThatsWhyWere)

        setvar(VAR_MUGSHOT, MUGSHOT_HUGH)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_YepIThinkItsFinally)

        setvar(VAR_MUGSHOT, MUGSHOT_GRIMSLEY)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_KidIfTheEliteFour)

        setvar(VAR_MUGSHOT, MUGSHOT_SHAUNTAL)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_ThingsAreDifferentNow)
        callnative(ClearMugshot)
        closemessage

        applymovement(ARCHER,YouRealizeTheyreEvilRight_WalkAroundToPlayer)
        waitmovement(0)
        applymovement(PLAYER,Common_Movement_FaceLeft)
        waitmovement(0)

        setvar(VAR_MUGSHOT, MUGSHOT_HUGH)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_LookIKnowThis)

        setvar(VAR_MUGSHOT, MUGSHOT_HILDA)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_YeahOkay)

        setvar(VAR_ALCATRAZ_STATE,POST_YOU_REALIZE_THEYRE_EVIL_RIGHT)

        if (flag(FLAG_TEMP_1F)){
            call(YouRealizeTheyreEvilRight_AskPlayerGift_Script)
        }

    callnative(ClearMugshot)
        closemessage
        end
}

script YouRealizeTheyreEvilRight_AskPlayerGift_Script {

    playse(SE_CONTEST_HEART)
        applymovement(GARBODOR,YouRealizeTheyreEvilRight_ShowAffection)
        waitmovement(0)

        setvar(VAR_MUGSHOT, MUGSHOT_HUGH)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_ThisGarbodor,MSGBOX_YESNO)

        if (var(VAR_RESULT) == NO){
            call(YouRealizeTheyreEvilRight_LeaveGift_Script)
        }else {
            call(YouRealizeTheyreEvilRight_GiveGift_Script)
        }
    callnative(ClearMugshot)
        closemessage
        release
        end
}

script YouRealizeTheyreEvilRight_LeaveGift_Script {
    setvar(VAR_MUGSHOT, MUGSHOT_HUGH)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_ThatsFineIll)
}

script YouRealizeTheyreEvilRight_GiveGift_Script {

    givecustommon(SPECIES_GARBODOR,40,ITEM_BLACK_SLUDGE,ITEM_CHERISH_BALL,NATURE_JOLLY,2,0,0,0,0,0,0,31,31,31,31,31,31,MOVE_HAZE,MOVE_SELF_DESTRUCT,MOVE_STOMPING_TANTRUM,MOVE_SLUDGE_BOMB,TRUE) //PSF TODO give a custom ball that only YC use
        //PSF TODO use PutZigzagoonInPlayerParty to show the player the garb

        if (var(VAR_RESULT) == 0){
            call(YouRealizeTheyreEvilRight_SendGiftToParty_Script)
        } else {
            call(YouRealizeTheyreEvilRight_SendGiftToPC_Script)
        }

    setvar(VAR_MUGSHOT, MUGSHOT_HUGH)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_TakeGoodCare)

}
script YouRealizeTheyreEvilRight_SendGiftToParty_Script {
    call(YouRealizeTheyreEvilRight_RecievedGiftFanfare)
        msgbox(gText_NicknameThisPokemon,MSGBOX_YESNO)

        if (var(VAR_RESULT) == YES){
            call(Common_EventScript_GetGiftMonPartySlot)
                call(Common_EventScript_NameReceivedPartyMon)
        }
}

script YouRealizeTheyreEvilRight_SendGiftToPC_Script {
    call(YouRealizeTheyreEvilRight_RecievedGiftFanfare)
        msgbox(gText_NicknameThisPokemon,MSGBOX_YESNO)

        if (var(VAR_RESULT) == YES){
            call(Common_EventScript_NameReceivedBoxMon)
        }
    call(Common_EventScript_TransferredToPC) //PSF TODO why does STR_VAR_2 store the wrong pokemon name
}

script YouRealizeTheyreEvilRight_RecievedGiftFanfare {
    bufferspeciesname(STR_VAR_2,SPECIES_GARBODOR)
        removeobject(GARBODOR)
        playfanfare(MUS_OBTAIN_ITEM)
        msgbox(gText_YouRealizeTheyreEvilRight_ObtainedGift)
        waitmessage
        waitfanfare
        bufferspeciesname(STR_VAR_1, SPECIES_GARBODOR)
}

script YouRealizeTheyreEvilRight_CantSleep_Script{
    if (var(VAR_ALCATRAZ_STATE) > BATTLED_MALVA && (var(VAR_ALCATRAZ_STATE) < POST_YOU_REALIZE_THEYRE_EVIL_RIGHT)){
        call(YouRealizeTheyreEvilRight_CantSleep_Dialogue)
    }
    return
}

script YouRealizeTheyreEvilRight_CantSleep_Dialogue {
    setvar(VAR_MUGSHOT, MUGSHOT_HILDA)
        callnative(DrawMugshot)
        msgbox(gText_YouRealizeTheyreEvilRight_IsStillWaiting)
        callnative(ClearMugshot)
        closemessage
        release
        end
}

script YouRealizeTheyreEvilRight_NoIdea_Dialogue {
        fadescreen(FADE_FROM_BLACK)
        setvar(VAR_STORYLINE_STATE,STORY_MORNING_OF_TIMELINE_SPLIT)

                applymovement(PLAYER,OkayLetsFixIt_PaceNightmare)
                waitmovement(0)

        if (flag(FLAG_TIMELINE_TIMETRAVEL)){
                lock
            setvar(VAR_MUGSHOT, MUGSHOT_HILDA)
            callnative(DrawMugshot)
                msgbox(gText_OkayLetsFixIt_WhatTheHell)
                }

        setvar(VAR_MUGSHOT, MUGSHOT_HILDA)
        callnative(DrawMugshot)
                msgbox(gText_YouRealizeTheyreEvilRight_IHaveNoIdeaWhat)
                callnative(ClearMugshot)
                closemessage
                }

                text gText_YouRealizeTheyreEvilRight_HolyShit {
                format("Holy shit. That was intense. Guess I need to think all this over, but something isn't adding up.")
                }
                text gText_YouRealizeTheyreEvilRight_AwesomeJobIn {
                format("Awesome job in {STR_VAR_1}. I heard all about it, and I'm so happy things are getting off the ground. I heard you got a phone call and disappeared. Everything okay?") //PSF TODO Buffer in the name of the last resotration quest city that was completed
                }
                text gText_YouRealizeTheyreEvilRight_TheyDontLove {
                format("Ycombinator called me. They don't love our project.")
                }
text gText_YouRealizeTheyreEvilRight_YouSeemSurprised {
    format("You seem surprised.")
}
text gText_YouRealizeTheyreEvilRight_YoureNot {
    format("You're not?")
}
text gText_YouRealizeTheyreEvilRight_IveBeenTrying {
    format("I've been trying to tell you the whole time, these guys are ruthless. Cruel, even. Good timing though, I think I can finally explain everything to you.")
}
text gText_YouRealizeTheyreEvilRight_WhatDoYouMean {
    format("What do you mean?")
}
text gText_YouRealizeTheyreEvilRight_IWannaShowYou {
    format("I wanna show you instead. Come to Alcatraz.")
}
text gText_YouRealizeTheyreEvilRight_YoullNeedToCross {
    format("I wanna show you but you'll need to cross some water to get here. You know how to Surf, right? No? Go learn from the Surfers in Pacifica, and then meet me on Alcatraz.")
}
text gText_YouRealizeTheyreEvilRight_IDontKnowIf {
    format("(I don't know if I can afford to get pulled any deeper into this…)")
}
text gText_YouRealizeTheyreEvilRight_ImHereWhere {
    format("I'm here! Where are you?")
}
text gText_YouRealizeTheyreEvilRight_SwimAroundThe {
    format("Come swim around the northeast side of the island! You'll see me.")
}
text gText_YouRealizeTheyreEvilRight_WelcomeToTheReal {
    format("Welcome to the real Alcatraz. I'm going down to the second level, but you should explore here first before coming straight down.")
}
text gText_YouRealizeTheyreEvilRight_DotDotDot {
    format("…")
}
text gText_YouRealizeTheyreEvilRight_WhileAlcatraz {
    format("While Alcatraz was a prison, it was absolutely not a state of the art facility - rather, criminals deemed “dangerous” were thrown into Alcatraz with little regard for health, rehabilitation, or even due process of law, with a preponderance of marginalized communities being locked away. ")
}
text gText_YouRealizeTheyreEvilRight_AsThePrisonPopulation {
    format("As the prison population grew, pressure mounted both internally and externally in order to demand a better quality of life for the prisoners.  The prison riot that started the occupation of the island came from an out of control guard killing an inmate for a minor violation. ")
}
text gText_YouRealizeTheyreEvilRight_TheInmateWasAlso {
    format("The inmate was also a member of SanFran's indingeous population, killed on the land that was stolen from their ancestors. The occupation called for the dissolution of the prison, transfer of prisoners to locations with humane conditions, and the return of the land back to its original owners.")
}
text gText_YouRealizeTheyreEvilRight_TheProtests {
    format("The protests gained national attention and seemed to be gathering interest, particularly with the help of Drasna's support, and pressure mounted on the government to comply. At the height of tension, an earthquake broke out, destroying a large portion of the prison and killing inmates and guards and effectively ending the occupation. ")
}
text gText_YouRealizeTheyreEvilRight_TheChampionHasArrived {
    format("The Champion has arrived! Great to meet you, I'm Drasna, and I'm the leader of the SanFran Elite Four. Or, I was. Now I'm not really sure what I do.")
}
text gText_YouRealizeTheyreEvilRight_NiceToMeetYou {
    format("Nice to meet you! …Archer, where are we?")
}
text gText_YouRealizeTheyreEvilRight_HasBeenUsing {
    format("TeamRocket has been using Psfcave's abandoned prison as a training ground.")
}
text gText_YouRealizeTheyreEvilRight_WowSuperResourceful {
    format("Wow! Super resourceful. Genius, even.")
}
text gText_YouRealizeTheyreEvilRight_WhyAreWeHere {
    format("Why are we here?")
}
text gText_YouRealizeTheyreEvilRight_ICanFinallyProve {
    format("I can finally prove that Ycombinator is worse than we originally thought. Once I do that, I want all of us to find a way to work together to protect SanFran from their bullshit.")
}
text gText_YouRealizeTheyreEvilRight_DidYouDragMe {
    format("Did you drag me out here to join a terrorist organiziation? Did you hear ANYTHING I said on the phone?")
}
text gText_YouRealizeTheyreEvilRight_YesWaitNo {
    format("Yes! Wait, no… No, Yes!")
}
text gText_YouRealizeTheyreEvilRight_DoesntDoAnythingForThis {
    format("TeamRocket doesn't do anything for this region. You're attacking innocent people, trying to destroy buildings - fuck, I absolutely should have turned you in!")
}
text gText_YouRealizeTheyreEvilRight_ICanProve {
    format("{PLAYER}, listen! I can prove that none of that is true.")
}
text gText_YouRealizeTheyreEvilRight_How {
    format("How?!?")
}
text gText_YouRealizeTheyreEvilRight_Look {
    format("Look.")
}
text gText_YouRealizeTheyreEvilRight_ThisIsOne {
    format("This is one of the Garbodor from the Chasecenter strike. {PLAYER}, you were told that TeamRocket planted these to blow up the construction site, right?")
}
text gText_YouRealizeTheyreEvilRight_IHadToGo {
    format("Yeah. Bianca and I had to go down there and defeat them and your goons.")
}
text gText_YouRealizeTheyreEvilRight_ThisOneIsLevel {
    format("This one is Level 40. Garbodor learns Explosion at Level 53.")
}
text gText_YouRealizeTheyreEvilRight_ButTheyDefinitelyCan {
    format("But they definitely can explode… so they're using Self-Destruct instead, right?")
}
text gText_YouRealizeTheyreEvilRight_DoesntLearnThatNaturally {
    format("Right. But Garbodor doesn't learn that naturally. It can only be inherited from its parents, or taught via a Technical Machine.")
}
text gText_YouRealizeTheyreEvilRight_SoUsedATM {
    format("Okay, so TeamRocket used a TM… wait.")
}
text gText_YouRealizeTheyreEvilRight_NoItMustHaveBeenBred {
    format("No, it must have been bred then.")
}
text gText_YouRealizeTheyreEvilRight_TakeACloserLook {
    format("Take a closer look.")
}
text gText_YouRealizeTheyreEvilRight_DoYouSeeNow {
    format("Do you see now?")
}
text gText_YouRealizeTheyreEvilRight_AhVeryAstute {
    format("Ah, very astute. What seemed off to you?")
}
text gText_YouRealizeTheyreEvilRight_WaitWhichMove {
    format("Wait, which move tipped you off?")
}
text gText_YouRealizeTheyreEvilRight_VeryClever {
    format("Very clever, {PLAYER}! You realized that Haze can only be passed down from the Yamask family, and Yamask can't learn Self-Destruct. This Garbrador had to learn the move via TM.")
}
text gText_YouRealizeTheyreEvilRight_TheTipOff {
    format("The tip-off is that this Garbodor knows Haze.")
}
text gText_YouRealizeTheyreEvilRight_So {
    format("…so?")
}
text gText_YouRealizeTheyreEvilRight_HazeCanOnly {
    format("Haze can only be passed down from the Yamask family, and Yamask can't learn Self-Destruct. This Garbrador had to learn the move via TM.")
}
text gText_YouRealizeTheyreEvilRight_IDontGetIt {
    format("I don't get it then. So this Garbodor was taught Self-Destruct. What does that mean?")
}
text gText_YouRealizeTheyreEvilRight_HasBeenFramingYou {
    format("Archer… Ycombinator has been framing you? ")
}
text gText_YouRealizeTheyreEvilRight_YouAlsoMetUp {
    format("{PLAYER}, you also met up with TeamRocket in Oakland too, right?")
}
text gText_YouRealizeTheyreEvilRight_ButArianaSaid {
    format("…yeah. But Ariana said that situation was super weird and was trying to track them down.")
}
text gText_YouRealizeTheyreEvilRight_YeahNobodyKnows {
    format("Yeah, nobody knows who they are or where they came from. I'm pretty sure Ycombinator has been sending in agents to make us look shitty. Between that and whatever else Ycombinator is feeding you, I'm not surprised you feel the way you do.")
}
text gText_YouRealizeTheyreEvilRight_WhyWhyDoAll {
    format("Why? Why do all this to just to screw with you guys?")
}
text gText_YouRealizeTheyreEvilRight_ExistsToMakeMoney {
    format("Ycombinator exists to make money. They don't care about you. Or us. Or the region. You weren't here when they first bought the League. They were ruthless. Fired thousands of people, dismantled and reshaped communities - all for their agenda.")
}
text gText_YouRealizeTheyreEvilRight_CantArgueWithThat {
    format("Can't argue with that.")
}
text gText_YouRealizeTheyreEvilRight_IJoinedThe {
    format("I joined the League Challenge to try to change things from the inside. But now I'm certain that we need external pressure in order to improve things for all of us.")
}
text gText_YouRealizeTheyreEvilRight_AndThatsWhyWere {
    format("And that's why we're all here?")
}
text gText_YouRealizeTheyreEvilRight_YepIThinkItsFinally {
    format("Yep. I think it's finally time we all come together to expose Ycombinator for the assholes that they are, and start to take power back for the people.")
}
text gText_YouRealizeTheyreEvilRight_KidIfTheEliteFour {
    format("Kid, if the Elite Four couldn't stop them in their prime, I don't know what you think TeamRocket will be able to do. Matter of fact, going solo might actually be better! Hell, I was able to start the Alcatraz campaigns without any help.")
}
text gText_YouRealizeTheyreEvilRight_ThingsAreDifferentNow {
    format("Look Drasna… things are different now. We've been fighting the good fight without any help so far… and look where that's gotten us. Perhaps they're onto something, and it's time for some real collective action.")
}
text gText_YouRealizeTheyreEvilRight_LookIKnowThis {
    format("Look, I know this is a lot of information to take in. I know you're going to make the right decision. Go home. Get some sleep. Come back here when you're ready to work with us, okay?")
}
text gText_YouRealizeTheyreEvilRight_YeahOkay {
    format("Yeah… okay.")
}
text gText_YouRealizeTheyreEvilRight_ThisGarbodor {
    format("Hey, this Garbodor seems to have taken a liking to you, and you seem to understand it pretty well. Do you want it?")
}
text gText_YouRealizeTheyreEvilRight_TakeGoodCare {
    format("Take good care of it.")
}
text gText_YouRealizeTheyreEvilRight_ThatsFineIll {
    format("That's fine, I'll find a good home for it.")
}
text gText_YouRealizeTheyreEvilRight_IsStillWaiting {
    format("Archer is still waiting for me at Alcatraz…")
}
text gText_YouRealizeTheyreEvilRight_DoYouWantToGo {
    format("Do you want to go to bed?")
}
text gText_YouRealizeTheyreEvilRight_IHaveNoIdeaWhat {
    format("…I have no idea what I'm going to do. Do I help Ycombinator and the police end TeamRocket permanently? Or do I help TeamRocket clear their name and help the people of SanFran?")
}
text gText_YouRealizeTheyreEvilRight_ObtainedGift {
    format("{PLAYER} was given the {STR_VAR_2}.")
}

movement YouRealizeTheyreEvilRight_StepBackward {
    lock_facing_direction
        walk_up
        walk_in_place_down
        unlock_facing_direction
        step_end
}

movement YouRealizeTheyreEvilRight_WalkToGroup {
    walk_right * 2
        walk_up
        step_end
}

movement YouRealizeTheyreEvilRight_WalkAroundToPlayer {
    walk_left
        walk_down * 2
        face_right
        step_end
}

movement YouRealizeTheyreEvilRight_ShowAffection {
    emote_heart
        jump_in_place_down
        jump_in_place_down
        step_end
}
