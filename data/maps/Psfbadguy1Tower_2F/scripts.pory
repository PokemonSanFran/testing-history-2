const PLAYER = OBJ_EVENT_ID_PLAYER
const PSFBADADMIN3 = 2

mapscripts Psfbadguy1Tower_2F_MapScripts {}

script AlwaysWatchingWazowski_CheckMeeting_Script{
    setvar(VAR_PSFBADGUY1TOWER_2F_STATE,1)
    goto(AlwaysWatchingWazowski_FloorWelcome_Script)
}

script AlwaysWatchingWazowski_FloorWelcome_Script{
    setvar(VAR_0x8000, MUGSHOT_SABRINA)
    callnative(DrawMugshot)
    msgbox(gText_AlwaysWatchingWazowski_Intro_Text1)
    closemessage
    callnative(ClearMugshot)
    end
}

script AlwaysWatchingWazowski_MovePlayerIntoPlace_Script{
    lockall
    getplayerxy(VAR_TEMP_0,VAR_TEMP_1)
    setvar(VAR_PSFBADGUY1TOWER_2F_STATE,2)

    if(var(VAR_TEMP_0) == 7){
    applymovement(PLAYER,Psfchara1DeskWalkFromLeft_Movement)
    }   else {
    applymovement(PLAYER,Psfchara1DeskWalkFromRight_Movement)
    }
    waitmovement(0)
    applymovement(PSFBADADMIN3,Common_Movement_FacePlayer)
    waitmovement(0)
    goto(AlwaysWatchingWazowski_Intro_Dialogue)
}

    
script AlwaysWatchingWazowski_Intro_Dialogue{
    setflag(FLAG_MEET_PSFBADADMIN3)
    playbgm(MUS_MT_PYRE,FALSE)
    setvar(VAR_0x8000, MUGSHOT_SABRINA)
    callnative(DrawMugshot)
    msgbox(gText_AlwaysWatchingWazowski_Intro_Text2)
    callnative(ClearMugshot)
    goto(AlwaysWatchingWazowski_WishYouHadVisited_Dialogue)
}
script AlwaysWatchingWazowski_WishYouHadVisited_Dialogue{
    setvar(VAR_0x8000, MUGSHOT_SABRINA)
    callnative(DrawMugshot)

    if(var(VAR_PSFCITY15_STATE) == 4){
    msgbox(gText_AlwaysWatchingWazowski_WishYouHadVisited_Text1)
    }   else {
    msgbox(gText_AlwaysWatchingWazowski_WishYouHadVisited_Text2)
    }

    callnative(ClearMugshot)
    goto(AlwaysWatchingWazowski_HowDidYouKnow_Dialogue)
    
}
script AlwaysWatchingWazowski_HowDidYouKnow_Dialogue{
    setvar(VAR_0x8000, MUGSHOT_HILDA)
    callnative(DrawMugshot)
    msgbox(gText_AlwaysWatchingWazowski_HowDidYouKnow_Text1)
    callnative(ClearMugshot)
    setvar(VAR_0x8000, MUGSHOT_SABRINA)
    callnative(DrawMugshot)
    msgbox(gText_AlwaysWatchingWazowski_HowDidYouKnow_Text2)
    callnative(ClearMugshot)
    setvar(VAR_0x8000, MUGSHOT_SABRINA)
    callnative(DrawMugshot)
    msgbox(gText_AlwaysWatchingWazowski_HowDidYouKnow_Text3)
    callnative(ClearMugshot)
    goto(AlwaysWatchingWazowski_MarketingandProduction_Dialogue)
}
script AlwaysWatchingWazowski_MarketingandProduction_Dialogue{
    setvar(VAR_0x8000, MUGSHOT_HILDA)
    callnative(DrawMugshot)
    msgbox(gText_AlwaysWatchingWazowski_MarketingandProduction_Text1)
    callnative(ClearMugshot)
    setvar(VAR_0x8000, MUGSHOT_SABRINA)
    callnative(DrawMugshot)
    msgbox(gText_AlwaysWatchingWazowski_MarketingandProduction_Text2)
    callnative(ClearMugshot)
    setvar(VAR_0x8000, MUGSHOT_HILDA)
    callnative(DrawMugshot)
    msgbox(gText_AlwaysWatchingWazowski_MarketingandProduction_Text3)
    callnative(ClearMugshot)
    setvar(VAR_0x8000, MUGSHOT_SABRINA)
    callnative(DrawMugshot)
    msgbox(gText_AlwaysWatchingWazowski_MarketingandProduction_Text4)
    callnative(ClearMugshot)
    closemessage
    goto(AlwaysWatchingWazowski_Psfchara2ProgramCutscene_Script)
}
script AlwaysWatchingWazowski_Psfchara2ProgramCutscene_Script{
    applymovement(PLAYER,Common_Movement_FaceLeft)
    waitmovement(0)
    fadescreen(FADE_TO_BLACK)
    setvar(VAR_0x8000, MUGSHOT_SABRINA)
    callnative(DrawMugshot)
    msgbox(gText_AlwaysWatchingWazowski_Psfchara2ProgramCutscene_Text1)
    callnative(ClearMugshot)
    setvar(VAR_0x8000, MUGSHOT_HILDA)
    callnative(DrawMugshot)
    msgbox(gText_AlwaysWatchingWazowski_Psfchara2ProgramCutscene_Text2)
    callnative(ClearMugshot)
    setvar(VAR_0x8000, MUGSHOT_SABRINA)
    callnative(DrawMugshot)
    msgbox(gText_AlwaysWatchingWazowski_Psfchara2ProgramCutscene_Text3)
    callnative(ClearMugshot)
    setvar(VAR_0x8000, MUGSHOT_SABRINA)
    callnative(DrawMugshot)
    msgbox(gText_AlwaysWatchingWazowski_Psfchara2ProgramCutscene_Text4)
    callnative(ClearMugshot)
    setvar(VAR_0x8000, MUGSHOT_SABRINA)
    callnative(DrawMugshot)
    msgbox(gText_AlwaysWatchingWazowski_Psfchara2ProgramCutscene_Text5)
    callnative(ClearMugshot)
    
    if (var(VAR_NATIVERIVALALPHA_STATE) > 0){
    setvar(VAR_0x8000, MUGSHOT_HILDA)
    callnative(DrawMugshot)
         msgbox(gText_AlwaysWatchingWazowski_Psfchara2ProgramCutscene_Text6)
    callnative(ClearMugshot)
    }
    closemessage
    fadescreen(FADE_FROM_BLACK)
    goto(AlwaysWatchingWazowski_MyProductivityHasDropped_Dialogue)
    
}
script AlwaysWatchingWazowski_MyProductivityHasDropped_Dialogue{
    applymovement(PLAYER,Common_Movement_FaceUp)
    setvar(VAR_0x8000, MUGSHOT_SABRINA)
    callnative(DrawMugshot)
    msgbox(gText_AlwaysWatchingWazowski_MyProductivityHasDropped_Text1)
    applymovement(PSFBADADMIN3,Common_Movement_FaceUp)
    fadedefaultbgm
    callnative(ClearMugshot)
    setvar(VAR_0x8000, MUGSHOT_HILDA)
    callnative(DrawMugshot)
    msgbox(gText_AlwaysWatchingWazowski_MyProductivityHasDropped_Text2)
    callnative(ClearMugshot)
    waitmovement(0)
    closemessage    
    releaseall
    end
}
script AlwaysWatchingWazowski_IgnoringPsfchara1_Dialogue{
    lockall    
    msgbox(gText_AlwaysWatchingWazowski__IgnoringPsfchara1_Text1)
    closemessage
    releaseall
    end
}

text gText_AlwaysWatchingWazowski_Intro_Text1{
format("Welcome {PLAYER}!")
}

text gText_AlwaysWatchingWazowski_Intro_Text2{
format("I imagine all the screens can be quite overwhelming. I never really think about how many we have until somebody new comes to visit.")
}

text gText_AlwaysWatchingWazowski_WishYouHadVisited_Text1{
format("I wish Psfbadadmin1 had picked a different time to tell you to come visit. I have at least 493 more minutes of work, and don't have the 12 minutes required to appropriately entertain you...")
}

text gText_AlwaysWatchingWazowski_WishYouHadVisited_Text2{
format("I wish you had visited Psfbadboss first. I have at least 493 more minutes of work and don't have the 12 minutes required to appropriately entertain you...")
}

text gText_AlwaysWatchingWazowski_HowDidYouKnow_Text1{
format("Wait, how did you know that stuff?")
}

text gText_AlwaysWatchingWazowski_HowDidYouKnow_Text2{
format("Look around. Do you think there's anything in the region that I don't see?")
}

text gText_AlwaysWatchingWazowski_HowDidYouKnow_Text3{
format("Psfbadguy1 security used to also perform surveillance, but my team was more than efficient enough to perform that on top of their existing duties.")
}

text gText_AlwaysWatchingWazowski_MarketingandProduction_Text1{
format("...oh. Okay. Yeah, there's a lot of screens. This is Marketing and Production, right?")
}

text gText_AlwaysWatchingWazowski_MarketingandProduction_Text2{
format("We develop content across all of our social platforms and optimize the perception of our brand to the world. Although right now, our primary project is actually you.")
}

text gText_AlwaysWatchingWazowski_MarketingandProduction_Text3{
format("What do you mean, me?")
}

text gText_AlwaysWatchingWazowski_MarketingandProduction_Text4{
format("You can see for yourself. Turn to your left in 3....2...1....")
}

text gText_AlwaysWatchingWazowski_Psfchara2ProgramCutscene_Text1{
format("Our biggest content initiative right now is broadcasting the race between all the League Challengers. My models predict that this will increase our sentiment among the professional battling community by 40%, and 88% among the casual battling communities. Never mind what it will do for your career.")
}

text gText_AlwaysWatchingWazowski_Psfchara2ProgramCutscene_Text2{
format("What do you mean?")
}

text gText_AlwaysWatchingWazowski_Psfchara2ProgramCutscene_Text3{
format("Tens of thousands of kids at home watching you all right now. Everybody loves competition, and even more so, they love watching their favorites progress. Our inbound sponsorship requests have skyrocketed 44.15% percent, and the challenge only started this morning.")
}

text gText_AlwaysWatchingWazowski_Psfchara2ProgramCutscene_Text4{
format("To put it simply, you're all going to be superstars.")
}

text gText_AlwaysWatchingWazowski_Psfchara2ProgramCutscene_Text5{
format("Historically, our in-region sentiment has been primarily negative, but even here, people want to see their hometown hero do well.")
}

text gText_AlwaysWatchingWazowski_Psfchara2ProgramCutscene_Text6{
format("(Wait, he's doing the League challenge? After all that shit talk? What a hypocrite!)")
}

text gText_AlwaysWatchingWazowski_MyProductivityHasDropped_Text1{
format("I imagine this has been very educational for you, {PLAYER}. But I can see my productivity has dropped 14% as a result of this conversation, and I have some content that needs to be scheduled very soon.")
}

text gText_AlwaysWatchingWazowski_MyProductivityHasDropped_Text2{
format("Sorry to bug you. I'll keep trying to put on a good show!")
}

text gText_AlwaysWatchingWazowski__IgnoringPsfchara1_Text1{
format("...")
}

movement Psfchara1DeskWalkFromLeft_Movement{
    walk_right
    face_up
    step_end
}

movement Psfchara1DeskWalkFromRight_Movement{
    walk_left *2
    face_up
    step_end

}

