const PLAYER = OBJ_EVENT_ID_PLAYER

mapscripts Psfbadguy1Tower_2F_MapScripts {
    MAP_SCRIPT_ON_TRANSITION {
        goto(Psfbadguy1Tower_2F_MapScripts_OnTransition)
    }

    MAP_SCRIPT_ON_FRAME_TABLE [
        VAR_PSFBADGUY1TOWER_2F_STATE, 3: Psfbadguy1Tower_2F_MovePlayerIntoPosition_Script
            VAR_PSFBADGUY1TOWER_2F_STATE, 5: Psfbadguy1Tower_2F_MovePlayerIntoPosition_Script
            VAR_LILYCOVE_CONTEST_LOBBY_STATE,3: LetsBurnThisMotherDown_MissionComplete_Dialogue
            VAR_PETALBURG_WOODS_STATE,4: HowDisappointing_MissionComplete_Dialogue
    ]
}

script Psfbadguy1Tower_2F_MapScripts_OnTransition {

    switch (var(VAR_PSFBADGUY1TOWER_2F_STATE)){
        case 0: call(WelcomeToTheWarRoom_Object_Hide_Script)
        case 1: call(WelcomeToTheWarRoom_Object_Hide_Script)
        case 2: call(WelcomeToTheWarRoom_Object_Hide_Script)
        case 3: call(WelcomeToTheWarRoom_Object_Setup_Script)
        case 4: call(WelcomeToTheWarRoom_Object_Hide_Script)
        case 5: call(YouRealizeWereEvilRight_Object_Setup_Script)
        case 6: call(YouRealizeWereEvilRight_Object_Cleanup_Script)
        case 7: call(CongratsYoureanAsshole_ObjectCleanUp_Script)
        default: call(WelcomeToTheWarRoom_Object_Hide_Script)
    }

    switch (var(VAR_PETALBURG_WOODS_STATE)){
        case 0:return
        case 4: call(HowDisappointing_PostMissionObjectSetUp_Script) //Rose is in Koga's office, thanking everybody for their work
        default: call(YouHaveYourOrders_ObjectSetUp_Script) //Koga is in his office, already gave you mission
    }

    switch (var(VAR_RUSTURF_TUNNEL_STATE)){
        case 0: return
        default:  call(Manhunt_TowerObjectSetUp_Script) //Sabrina is in her office, already gave you mission
    }


    if (var(VAR_LILYCOVE_CONTEST_LOBBY_STATE) == 3) {
        call(LetsBurnThisMotherDown_ObjectMove_Script)
    }
}

script Psfbadguy1Tower_2F_MovePlayerIntoPosition_Script {
    lock
        getplayerxy(VAR_TEMP_0,VAR_TEMP_1)

        if (var(VAR_TEMP_0) != 7){
            fadescreen(FADE_TO_BLACK)
                setobjectxy(PLAYER,7,14)
                TeleportCamera(7,14)
                fadescreen(FADE_FROM_BLACK)
        }

    switch (var(VAR_PSFBADGUY1TOWER_2F_STATE)){
        case 3: goto(WelcomeToTheWarRoom_ExplainSitaution_Dialogue)
        case 5: goto(YouRealizeWereEvilRight_Open_Dialogue)
    }
}

script Psfbadguy1Tower_2F_Psfbadadmin_Event_Script {
    lock
        switch (var(VAR_STORYLINE_STATE)){
            case 43: call(CongratsYourAssAsshole_Intro_Dialogue)
            case 44: call(LetsBurnThisMotherDown_Assignment_Dialogue)
        }
    release
        end
}

script Psfbadguy1Tower_2F_Psfbadadmin2_Event_Script {
    lock
        switch (var(VAR_STORYLINE_STATE)){
            case 44: call(YouHaveYourOrders_Assignment_Dialogue)
        }
    release
        end
}

script Psfbadguy1Tower_2F_Psfbadadmin3_Event_Script {
    lock
        switch (var(VAR_STORYLINE_STATE)){
            case 44: call(Manhunt_Assignment_Dialogue)
            default: call(AlwaysWatchingWazowski_IgnoringPlayer_Dialogue)
        }
    release
    end
}
