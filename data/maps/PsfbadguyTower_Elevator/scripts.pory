mapscripts PsfbadguyTower_Elevator_MapScripts {}

script PsfbadguyTower_ElevatorAttendant_Script {
    lock
    faceplayer
    setvar(VAR_0x8004,0)
    if (flag(FLAG_TEMP_2)){
        call(PsfbadguyTowerElevator_EventScript_SetFloor)
    }
    copyvar(VAR_0x8006,VAR_DEPT_STORE_FLOOR)
	special(ShowDeptStoreElevatorFloorSelect)
    message(gText_WhichFloorWouldYouLike)
    waitmessage
    setvar(VAR_0x8004,0)
    specialvar(VAR_RESULT,GetDeptStoreDefaultFloorChoice)
    switch(var(VAR_RESULT))
       {
        case 0: goto(PsfbadguyTowerElevator_EventScript_ChooseFloorFrom5th )
        case 1: goto(PsfbadguyTowerElevator_EventScript_ChooseFloorFrom4th )
        case 2: goto(PsfbadguyTowerElevator_EventScript_ChooseFloorFrom3rd)
        case 3: goto(PsfbadguyTowerElevator_EventScript_ChooseFloorFrom2nd )
        case 4: goto(PsfbadguyTowerElevator_EventScript_ChooseFloorFrom1st )
        }
    end
}

script PsfbadguyTowerElevator_EventScript_ChooseFloorFrom5th{ 
    multichoicedefault(0,0,MULTI_FLOORS,0,FALSE)
    goto(PsfbadguyTowerElevator_EventScript_ChooseFloor)
    end
}
script PsfbadguyTowerElevator_EventScript_ChooseFloorFrom4th{
    multichoicedefault(0,0,MULTI_FLOORS,1,FALSE)
    goto(PsfbadguyTowerElevator_EventScript_ChooseFloor)
    end
}
script PsfbadguyTowerElevator_EventScript_ChooseFloorFrom3rd{
    multichoicedefault(0,0,MULTI_FLOORS,2,FALSE)
    goto(PsfbadguyTowerElevator_EventScript_ChooseFloor)
    end
}
script PsfbadguyTowerElevator_EventScript_ChooseFloorFrom2nd{
    multichoicedefault(0,0,MULTI_FLOORS,3,FALSE)
    goto(PsfbadguyTowerElevator_EventScript_ChooseFloor)
    end
}
script PsfbadguyTowerElevator_EventScript_ChooseFloorFrom1st{
    multichoicedefault(0,0,MULTI_FLOORS,4,FALSE)
    goto(PsfbadguyTowerElevator_EventScript_ChooseFloor)
    end
}

script PsfbadguyTowerElevator_EventScript_ChooseFloor{
    switch(var(VAR_RESULT)) {
        //case 0: goto(PsfbadguyTowerElevator_EventScript_5thFloor)
        //case 1: goto(PsfbadguyTowerElevator_EventScript_4thFloor)
        //case 2: goto(PsfbadguyTowerElevator_EventScript_3rdFloor)
        //case 3: goto(PsfbadguyTowerElevator_EventScript_2ndFloor)
        case 4: goto(PsfbadguyTowerElevator_EventScript_1stFloor)
        //case 5: goto(PsfbadguyTowerElevator_EventScript_ExitFloorSelect)
        case(MULTI_B_PRESSED): goto(PsfbadguyTowerElevator_EventScript_ExitFloorSelect)
    }
        end
}

script PsfbadguyTowerElevator_EventScript_1stFloor{
    setvar(VAR_0x8006,DEPT_STORE_FLOORNUM_1F)
    setdynamicwarp(MAP_LILYCOVE_CITY_DEPARTMENT_STORE_1F,255,2,1)
    if (var(VAR_DEPT_STORE_FLOOR) == DEPT_STORE_FLOORNUM_1F)    {
        goto(PsfbadguyTowerElevator_EventScript_ExitFloorSelect)
    }
    call(PsfbadguyTowerElevator_EventScript_MoveElevator)
	setvar(VAR_DEPT_STORE_FLOOR,DEPT_STORE_FLOORNUM_1F)
	goto(PsfbadguyTowerElevator_EventScript_ExitFloorSelect)
    end
}
script PsfbadguyTowerElevator_EventScript_2ndFloor{
    setvar(VAR_0x8006,DEPT_STORE_FLOORNUM_2F)
    setdynamicwarp(MAP_LILYCOVE_CITY_DEPARTMENT_STORE_1F,255,2,1)
    if (var(VAR_DEPT_STORE_FLOOR) == DEPT_STORE_FLOORNUM_1F)    {
        goto(PsfbadguyTowerElevator_EventScript_ExitFloorSelect)
    }
    call(PsfbadguyTowerElevator_EventScript_MoveElevator)
	setvar(VAR_DEPT_STORE_FLOOR,DEPT_STORE_FLOORNUM_1F)
	goto(PsfbadguyTowerElevator_EventScript_ExitFloorSelect)
    end
}
script PsfbadguyTowerElevator_EventScript_1stFloor{
    setvar(VAR_0x8006,DEPT_STORE_FLOORNUM_1F)
    setdynamicwarp(MAP_LILYCOVE_CITY_DEPARTMENT_STORE_1F,255,2,1)
    if (var(VAR_DEPT_STORE_FLOOR) == DEPT_STORE_FLOORNUM_1F)    {
        goto(PsfbadguyTowerElevator_EventScript_ExitFloorSelect)
    }
    call(PsfbadguyTowerElevator_EventScript_MoveElevator)
	setvar(VAR_DEPT_STORE_FLOOR,DEPT_STORE_FLOORNUM_1F)
	goto(PsfbadguyTowerElevator_EventScript_ExitFloorSelect)
    end
}
script PsfbadguyTowerElevator_EventScript_1stFloor{
    setvar(VAR_0x8006,DEPT_STORE_FLOORNUM_1F)
    setdynamicwarp(MAP_LILYCOVE_CITY_DEPARTMENT_STORE_1F,255,2,1)
    if (var(VAR_DEPT_STORE_FLOOR) == DEPT_STORE_FLOORNUM_1F)    {
        goto(PsfbadguyTowerElevator_EventScript_ExitFloorSelect)
    }
    call(PsfbadguyTowerElevator_EventScript_MoveElevator)
	setvar(VAR_DEPT_STORE_FLOOR,DEPT_STORE_FLOORNUM_1F)
	goto(PsfbadguyTowerElevator_EventScript_ExitFloorSelect)
    end
}
script PsfbadguyTowerElevator_EventScript_1stFloor{
    setvar(VAR_0x8006,DEPT_STORE_FLOORNUM_1F)
    setdynamicwarp(MAP_LILYCOVE_CITY_DEPARTMENT_STORE_1F,255,2,1)
    if (var(VAR_DEPT_STORE_FLOOR) == DEPT_STORE_FLOORNUM_1F)    {
        goto(PsfbadguyTowerElevator_EventScript_ExitFloorSelect)
    }
    call(PsfbadguyTowerElevator_EventScript_MoveElevator)
	setvar(VAR_DEPT_STORE_FLOOR,DEPT_STORE_FLOORNUM_1F)
	goto(PsfbadguyTowerElevator_EventScript_ExitFloorSelect)
    end
}
script PsfbadguyTowerElevator_EventScript_1stFloor{
    setvar(VAR_0x8006,DEPT_STORE_FLOORNUM_1F)
    setdynamicwarp(MAP_LILYCOVE_CITY_DEPARTMENT_STORE_1F,255,2,1)
    if (var(VAR_DEPT_STORE_FLOOR) == DEPT_STORE_FLOORNUM_1F)    {
        goto(PsfbadguyTowerElevator_EventScript_ExitFloorSelect)
    }
    call(PsfbadguyTowerElevator_EventScript_MoveElevator)
	setvar(VAR_DEPT_STORE_FLOOR,DEPT_STORE_FLOORNUM_1F)
	goto(PsfbadguyTowerElevator_EventScript_ExitFloorSelect)
    end
}
script PsfbadguyTowerElevator_EventScript_1stFloor{
    setvar(VAR_0x8006,DEPT_STORE_FLOORNUM_1F)
    setdynamicwarp(MAP_LILYCOVE_CITY_DEPARTMENT_STORE_1F,255,2,1)
    if (var(VAR_DEPT_STORE_FLOOR) == DEPT_STORE_FLOORNUM_1F)    {
        goto(PsfbadguyTowerElevator_EventScript_ExitFloorSelect)
    }
    call(PsfbadguyTowerElevator_EventScript_MoveElevator)
	setvar(VAR_DEPT_STORE_FLOOR,DEPT_STORE_FLOORNUM_1F)
	goto(PsfbadguyTowerElevator_EventScript_ExitFloorSelect)
    end
}
script PsfbadguyTowerElevator_EventScript_1stFloor{
    setvar(VAR_0x8006,DEPT_STORE_FLOORNUM_1F)
    setdynamicwarp(MAP_LILYCOVE_CITY_DEPARTMENT_STORE_1F,255,2,1)
    if (var(VAR_DEPT_STORE_FLOOR) == DEPT_STORE_FLOORNUM_1F)    {
        goto(PsfbadguyTowerElevator_EventScript_ExitFloorSelect)
    }
    call(PsfbadguyTowerElevator_EventScript_MoveElevator)
	setvar(VAR_DEPT_STORE_FLOOR,DEPT_STORE_FLOORNUM_1F)
	goto(PsfbadguyTowerElevator_EventScript_ExitFloorSelect)
    end
}
script PsfbadguyTowerElevator_EventScript_1stFloor{
    setvar(VAR_0x8006,DEPT_STORE_FLOORNUM_1F)
    setdynamicwarp(MAP_LILYCOVE_CITY_DEPARTMENT_STORE_1F,255,2,1)
    if (var(VAR_DEPT_STORE_FLOOR) == DEPT_STORE_FLOORNUM_1F)    {
        goto(PsfbadguyTowerElevator_EventScript_ExitFloorSelect)
    }
    call(PsfbadguyTowerElevator_EventScript_MoveElevator)
	setvar(VAR_DEPT_STORE_FLOOR,DEPT_STORE_FLOORNUM_1F)
	goto(PsfbadguyTowerElevator_EventScript_ExitFloorSelect)
    end
}
script PsfbadguyTowerElevator_EventScript_1stFloor{
    setvar(VAR_0x8006,DEPT_STORE_FLOORNUM_1F)
    setdynamicwarp(MAP_LILYCOVE_CITY_DEPARTMENT_STORE_1F,255,2,1)
    if (var(VAR_DEPT_STORE_FLOOR) == DEPT_STORE_FLOORNUM_1F)    {
        goto(PsfbadguyTowerElevator_EventScript_ExitFloorSelect)
    }
    call(PsfbadguyTowerElevator_EventScript_MoveElevator)
	setvar(VAR_DEPT_STORE_FLOOR,DEPT_STORE_FLOORNUM_1F)
	goto(PsfbadguyTowerElevator_EventScript_ExitFloorSelect)
    end
}

script PsfbadguyTowerElevator_EventScript_ExitFloorSelect{
    special(CloseDeptStoreElevatorWindow)
    release
    end
}

script PsfbadguyTowerElevator_EventScript_MoveElevator{
    special(CloseDeptStoreElevatorWindow)
    closemessage
    applymovement(VAR_LAST_TALKED,Common_Movement_WalkInPlaceFastestDown)
    waitmovement(0)
    waitse
    special(MoveElevator)
    waitstate
    setflag(FLAG_TEMP_2)
    return
}

script PsfbadguyTowerElevator_EventScript_SetFloor{
    special(SetDeptStoreFloor)
    return
}

    
