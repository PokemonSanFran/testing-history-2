const PLAYER = OBJ_EVENT_ID_PLAYER

mapscripts TreasureIsland_MapScripts {
    MAP_SCRIPT_ON_TRANSITION {
        goto(TreasureIsland_MapScripts_OnTransition)
    }

    MAP_SCRIPT_ON_FRAME_TABLE [
        VAR_STORYLINE_STATE, 41: YouRealizeWereEvilRight_PhoneCall_Dialogue
    ]
}

script TreasureIsland_MapScripts_OnTransition {
    switch (var(VAR_STORYLINE_STATE)){
        case 38: return
        default: goto(LetsGrabLunch_HideObject_Script)
    }
}

script TreasureIsland_ChooseFerryDestination_Script {
    msgbox(gText_WhereWould,MSGBOX_NPC)
    goto(TreasureIsland_UnlockedDestinations_Script)
}

script TreasureIsland_UnlockedDestinations_Script {
    switch (var(VAR_FERRY_STATE)){
        case 2:goto(TreasureIsland_FerryState0_Script)
    }
}

script TreasureIsland_FerryState0_Script {
    multichoicedefault(18,8,TREASUREISLAND_FERRY_DESTINATIONS_VER1,2,TRUE)
    call(SlateportCity_Harbor_EventScript_BoardFerry)

    switch (var(VAR_RESULT)){
        case 0: warp(MAP_FERRYBUILDING,8,11)
        case 1: goto(SlateportCity_Harbor_EventScript_CancelDestinationSelect)
        case MULTI_B_PRESSED: goto(SlateportCity_Harbor_EventScript_CancelDestinationSelect)
}
}

